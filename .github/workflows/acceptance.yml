name: Acceptance Tests

on:
  pull_request:
    branches: [ main, release/** ]
  push:
    branches: [ main, release/** ]
    tags: [ v* ]

jobs:
  api:
    name: API Tests
    uses: ./.github/workflows/acceptance-test-workflow.yml
    with:
      testfilters: ${{ 'api' }}

  erc:
    name: ERC Tests
    uses: ./.github/workflows/acceptance-test-workflow.yml
    needs: api
    with:
      testfilters: ${{ 'erc' }}

  precompile:
    name: Precompile Tests 
    uses: ./.github/workflows/acceptance-test-workflow.yml
    needs: [ api, erc ]
    with: 
      testfilters: ${{ 'tokencreate, tokenmanagement, htsprecompilev1' }}
